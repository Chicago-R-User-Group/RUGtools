---
title: "New Meetup Members"
author: "Justin M. Shea"
date: "April 17, 2018"
output: html_vignette
vignette: >
  %\VignetteEngine{knitr::knitr}
  %\VignetteIndexEntry{New Meetup Members}
  %\usepackage[UTF-8]{inputenc}
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)

library(knitr)

library(RUGtools)
```


  
## Question: How many members joined since January of 2017?  
 
Load the member list data.

```{r}
data(member_list)
```

Lets plot it!

```{r}
plot(y = member_list$Count.Index, x = member_list$Joined.Group.on, type = "l", col = "blue",
     main = "Cumulative CRUG members",  
         ylab = "Members", xlab = "")
```

### How many joined since January 2017?

```{r}
members_2017_present <- subset(member_list, Joined.Group.on > "2017-01-01")

max(members_2017_present$Count.Index) - min(members_2017_present$Count.Index)

```


###  How many joined since the last meetup? 

First, get a unique ordered list of Meetup dates

```{r}
Meetup_dates <- sort(unique(member_list$Last.Attended))

new_members <- subset(member_list, Joined.Group.on > Meetup_dates[NROW(Meetup_dates)])

NROW(new_members)
```
 
How about the number of new members between last meetup and the one prior to that?

```{r}
new_members2 <- subset(member_list, Joined.Group.on <= Meetup_dates[NROW(Meetup_dates)] &
                                    Joined.Group.on > Meetup_dates[NROW(Meetup_dates)-1])

NROW(new_members2)
```


Since was getting repetitive, we've created a function `new_mem_counter` to count the number of new members joined between meetups.

```{r}
new_members <- new_mem_counter(member_list)

kable(new_members, align = 'l')
```

Lets Explore the `new_members` data set.
Which gap between meetups had the most new members?
 
```{r}
max_new_members <- new_members[new_members$New==max(new_members$New),]

kable(max_new_members, align = 'l')
```

Let plot the `new members` data.

```{r}
   # Create Date Range Index
  Start_Date <- "2010-01-01"
    End_Date <- Sys.Date()
  Date_Index <- as.numeric(row.names(new_members[new_members$Date > Start_Date &
                                                new_members$Date <= End_Date,]))
  
  # Create x-axis labels, using year-month date format
  x_labels <- format(new_members$Date[Date_Index], "%Y-%m")

  # Plot
  barplot(new_members$New[Date_Index], names.arg = x_labels,
         main = "CRUG members, joined between meetups",  
         ylab = "New Members", xlab = "")
```

Let plot the `new members` data since 2017.

```{r}
   # Create Date Range Index
  Start_Date <- "2017-01-01"
    End_Date <- Sys.Date()
  Date_Index <- as.numeric(row.names(new_members[new_members$Date > Start_Date &
                                                new_members$Date <= End_Date,]))
  
  # Create x-axis labels, using year-month date format
  x_labels <- format(new_members$Date[Date_Index], "%Y-%m")

  # Plot
  barplot(new_members$New[Date_Index], names.arg = x_labels, las=2,
         main = "CRUG members, joined between meetups",  
         ylab = "New Members", xlab = "")
```
 